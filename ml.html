<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico" />

    <script src="https://apis.google.com/js/api.js"></script>
    <title>Voice For health</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link
      href="https://www.jqueryscript.net/css/jquerysctipttop.css"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="en/manage-audio-en.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
      integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/css/intlTelInput.css"
      rel="stylesheet"
      media="screen"
    />
    <script src="en/flag.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/js/intlTelInput.js"></script>
  </head>

  <body onload="fnBrowserDetect()">
    <h1></h1>
    <div id="MAIN">
      <!--<h1>Voice for Health</h1>-->
      <div class="logo-container">
        <a href="index.html">
          <img
            class="logo"
            src="./assets/green-576w.png"
            alt="Voice For Health Logo"
          />
        </a>
      </div>
      <p class="lead">
        Temui kesihatan dalaman dan selebihnya dengan suara anda. <br />
        Pencegahan lebih baik daripada penawar.
      </p>

      <div id="recorder-instructions" class="recorder-instructions">
        <p1>Arahan</p1>
        <div class="text-container">
          <div class="short-version">
            <div class="step-1A">
              <p>Langkah 1 - Cari Ruang Sunyi</p>
            </div>
            <div class="step-2A">
              <p>Langkah 2 - Persediaan Sebelum Rakaman</p>
            </div>
            <div class="step-2A">
              <p>Langkah 3 - Klik "Mula Rakaman"</p>
            </div>

            <div class="step-3A">
              <p>Langkah 4 - Klik "Hentikan/ Ulang Rakaman"</p>
            </div>

            <div class="step-4A">
              <p>Langkah 5 - Isi Profil Peribadi</p>
            </div>
            <div class="step-6A">
              <p>Langkah 6 - Klik "Muat Naik Rakaman"</p>
            </div>
          </div>
        </div>

        <div class="full-version hidden">
          <div class="step-1A">
            <h4>Langkah 1 - Cari Ruang Sunyi</h4>
            <p>
              - Pastikan untuk mematikan kipas/ penyejuk udara, jika tidak, ia
              akan mempengaruhi keputusan ujian. Letakkan telefon anda dalam
              mode senyap.
            </p>
            <p>- Put your phone on silent mode.</p>
          </div>

          <div class="step-2A">
            <h4>Langkah 2 - Persediaan Sebelum Rakaman</h4>
            <p>
              - Sila gunakan mikrofon telefon untuk merakamkan suara anda,
              jangan gunakan fon kepala! ! ! Hanya klik "Mula Rakaman" apabila
              anda mempunyai sambungan internet yang stabil.
            </p>
          </div>

          <div class="step-3A">
            <h4>Langkah 3 - Klik "Mula Rakaman"</h4>
            <p>
              - Pegang telefon anda dalam posisi yang selesa dan letakkan mulut
              anda berdekatan dengan mikrofon. Bacakan skrip bacaan di bawah
              dengan lantang pada kadar pertuturan normal sehingga bar kemajuan
              mencapai 100%.
            </p>
          </div>

          <div class="step-4A">
            <h4>Langkah 4 - Klik "Hentikan/ Ulang Rakaman"</h4>
            <p>
              - Anda boleh klik "Hentikan Rakaman" jika anda ingin membatalkan
              rakaman. Anda boleh semak rakaman melalui pemain. Jika anda tidak
              berpuas hati, anda boleh klik "Ulang Rakaman". Selepas mengesahkan
              rakaman, klik "Seterusnya".
            </p>
          </div>

          <div class="step-5A">
            <h4>Langkah 5 - Isi Profil Peribadi</h4>
            <p>
              - Sila berikan maklumat yang benar dan lengkap, jika tidak, ia
              akan menjejaskan proses untuk menyediakan laporan kesihatan
              fizikal dan mental anda.
            </p>
          </div>

          <div class="step-6A">
            <h4>Langkah 6 - Klik "Muat Naik Rakaman"</h4>
            <p>
              - Selepas mengisi profil peribadi, klik "Muat Naik Rakaman". Masa
              muat naik bergantung pada kelajuan internet, biasanya mengambil
              masa 1-2 minit. Apabila "Rakaman anda berjaya dimuat naik. Terima
              kasih!" muncul, itu bermakna selesai.
            </p>
            <p style="text-decoration-line: underline">
              - Kami akan menghubungi anda dalam masa 48 jam.
            </p>
          </div>
        </div>

        <button onclick="scrollToSection()" class="read-more-button">
          Baca Lagi
        </button>
      </div>

      <div class="mic">
        <select name="" id="micSelect"></select>

        <select id="visSelect" class="hidden">
          <option value="frequencybars">Bar</option>
          <option value="sinewave">Wave</option>
          <option value="circle">Circle</option>
        </select>
      </div>

      <div id="main-block" class="hidden">
        <h4>Profil peribadi</h4>
        <form action="index.html" name="google-sheet">
          <hr />
          <label id="icon" for="name"><i class="fas fa-user"></i></label>
          <input
            type="text"
            name="name"
            id="name"
            placeholder="Name"
            required
          />
          <br />

          <label id="icon" for="name"><i class="fas fa-envelope"></i></label>
          <input
            type="text"
            name="email"
            id="email"
            placeholder="Email"
            required
          />
          <br />

          <label id="icon" for="name"><i class="fas fa-phone"></i></label>
          <input type="tel" name="mobile" id="mobile" required />

          <br />
          <label id="icon" for="name"><i class="fas fa-calendar"></i></label>
          <input
            type="text"
            name="dob"
            id="dob"
            placeholder="Date of Birth (DD/MM/YYYY)"
            required
          />

          <div class="sex">
            <label id="icon" for="name"
              ><i class="fas fa-venus-mars"></i
            ></label>
            <input type="radio" value="Male" id="male" name="gender" />
            <label for="male" class="radio">Male</label>
            <input type="radio" value="Female" id="female" name="gender" />
            <label for="female" class="radio">Female</label>
          </div>

          <label id="icon" for="name"><i class="fas fa-pills"></i></label>
          Sedang mengambil ubat barat?
          <br />
          <div class="medicine">
            <input type="radio" value="Yes" id="med_yes" name="med" />
            <label for="med_yes" class="radio">Yes </label>
            <input type="radio" value="No" id="med_no" name="med" />
            <label for="med_no" class="radio"> No</label>
          </div>
          <br />

          <label id="icon" for="name"><i class="fas fa-id-card"></i></label>
          <input
            type="text"
            name="referral"
            id="referral"
            placeholder="Insert associate code (if any)"
            required
          />
          <br />
          <hr />
        </form>
      </div>

      <div class="audio-controls">
        <button id="submit" class="hidden">
          Muat naik Rakaman <i class="fas fa-upload"></i>
        </button>
        <button id="next" class="hidden">
          Next <i class="fas fa-caret-square-right"></i>
        </button>
      </div>

      <div class="audio-controls">
        <button id="record">
          Mulakan Rakaman <i class="fas fa-microphone"></i>
        </button>
        <button id="stop" class="hidden">
          Hentikan Rakaman <i class="fas fa-microphone-slash"></i>
        </button>
        <button id="redo" class="hidden">
          Buat semula Rakaman <i class="fas fa-microphone"></i>
        </button>
      </div>

      <div id="viz">
        <canvas id="analyser" width="1024" height="200" class="hidden"></canvas>
      </div>

      <div id="progress" class="hidden">
        <div id="p_bar" class="bar" style="width: 0%">
          <p id="p_percent" class="percent">0%</p>
        </div>
      </div>

      <div class="audio-playback">
        <audio id="audio" controls class="hidden"></audio>
      </div>

      <div id="script">
        <div class="reading-script">
          <h4>Skrip Bacaan</h4>
          <br /><br />
          <div class="step-1A">
            Suara manusia adalah sesuatu yang luar biasa. Ia membezakan kita
            daripada makhluk lain di planet ini. Ia adalah cara kita berhubung
            antara satu sama lain, menyampaikan emosi dan idea, dan memahami
            dunia di sekeliling kita.
            <br /><br />
            Di Voice for Health, kami terpegun dengan kuasa suara manusia, bukan
            hanya untuk berkomunikasi, tetapi juga untuk mengesan tanda-tanda
            awal penyakit. Melalui perkhidmatan Biomarker Vokal kami, kami dapat
            menganalisis corak suara dan mengesan perubahan halus yang mungkin
            menunjukkan permulaan pelbagai penyakit. Melalui sumbangan suara
            anda, kami dapat menghasilkan Laporan Kesihatan Pencegahan.
            <br /><br />
            Bayangkan bahawa kami dapat mengesan tanda-tanda awal penyakit
            pernafasan, gangguan kardiovaskular, atau keadaan neurologi, hanya
            dengan menganalisis bunyi suara anda. Kami menggunakan kuasa AI dan
            pembelajaran mesin untuk menganalisis data suara dan mengesan tanda
            awal penyakit, membolehkan profesional kesihatan mendiagnosis dan
            merawat pesakit lebih awal, dan dengan keseluruhan, meningkatkan
            kualiti hidup.
            <br /><br />
            Namun, itu belum semuanya. Kami juga sedang menerokai cara di mana
            suara manusia boleh digunakan untuk mempromosikan kesihatan mental
            dan kesejahteraan. Teknologi analisis suara kami dapat mengesan
            perubahan halus dalam suara seseorang yang mungkin menunjukkan
            perubahan dalam suasana hati, tahap tekanan, atau fungsi kognitif.
            Dengan menganalisis corak suara ini, kami dapat membantu orang
            memahami kesihatan mental mereka sendiri dengan lebih baik dan
            mengambil langkah proaktif untuk kesejahteraan yang lebih baik.
            <br /><br />
            Contohnya, bayangkanlah anda dapat menggunakan suara anda untuk
            mengesan tanda-tanda awal kemurungan atau kebimbangan berlebihan,
            dan mengambil langkah-langkah untuk menguruskan keadaan tersebut
            sebelum menjadi lebih serius. Atau bayangkan dapat menggunakan suara
            anda untuk meningkatkan fokus dan konsentrasi, serta meningkatkan
            prestasi kognitif secara keseluruhan.
            <br /><br />
            Di Voice for Health, kami komited untuk menerokai bagaimana suara
            manusia boleh digunakan untuk mempromosikan kesihatan dan
            kesejahteraan, dan membuka rahsia kesihatan manusia untuk faedah
            semua orang. <br /><br />
            Jadi, jika anda berminat untuk mengambil bahagian dalam analisis
            suara kami, kami mengundang anda dalam perjalanan penemuan ini.
            Dengan menyumbang suara anda, anda akan membolehkan diri anda
            membangunkan pemahaman yang lebih baik tentang hubungan antara suara
            dan kesihatan, dan anda akan mengambil langkah proaktif ke arah
            kesihatan dan kesejahteraan yang lebih baik untuk diri sendiri.
            <br /><br />
            Sebagai kesimpulan, mari kita meraikan keajaiban suara manusia, dan
            mari kita terus meneroka pelbagai cara di mana ia dapat digunakan
            untuk menaikkan taraf kesihatan dan kesejahteraan. Terima kasih
            kerana mempertimbangkan Voice for Health.
            <br /><br /><br /><br />
            * Ulang bacaan jika perlu sehingga bar kemajuan mencapai 100%
          </div>
        </div>
      </div>

      <svg class="arrow">
        <path id="a1" d="M0 0 L15 22 L30 0"></path>
      </svg>

      <!--<div id="transbox_1" class="hidden">
      <div class="wrapper">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="shadow"></div>
        <div class="shadow"></div>
        <div class="shadow"></div>
        <span>Processing...</span>
      </div>
    </div>-->
    </div>

    <div id="transbox_2" class="hidden">
      <div class="wrapper">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="shadow"></div>
        <div class="shadow"></div>
        <div class="shadow"></div>
        <span>Uploading...</span>
      </div>
    </div>

    <script>
      const readMoreButton = document.querySelector(".read-more-button");
      const shortVersion = document.querySelector(".short-version");
      const fullVersion = document.querySelector(".full-version");

      readMoreButton.addEventListener("click", () => {
        if (shortVersion.classList.contains("hidden")) {
          // "Read More" was clicked
          readMoreButton.textContent = "Baca Lagi";
          shortVersion.classList.toggle("hidden");
          fullVersion.classList.toggle("hidden");
          scrollToSection();
        } else {
          // "Read Less" was clicked
          readMoreButton.textContent = "Baca kurang";
          shortVersion.classList.toggle("hidden");
          fullVersion.classList.toggle("hidden");
          scrollToSection();
        }
      });

      function scrollToSection() {
        var section = document.getElementById("recorder-instructions");
        section.scrollIntoView({ behavior: "smooth" });
      }

      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      }

      document.addEventListener("scroll", handleScroll);
      var rootElement = document.documentElement;

      // function otherReferral() {
      //   var referralOption = document.getElementById("referral").value;

      //   if (referralOption == "Other") {
      //     $("#oth_referral").removeClass("hidden");
      //   }
      //   else {
      //     $("#oth_referral").addClass("hidden");
      //   }
      // }

      function handleScroll() {
        // Do something on scroll
        var scrollTotal = rootElement.scrollHeight - rootElement.clientHeight;
        if (rootElement.scrollTop / scrollTotal > 0.95) {
          // Show button
          document.getElementById("a1").classList.add("hidden");
        } else if (rootElement.scrollTop / scrollTotal < 0.9) {
          // Hide button
          document.getElementById("a1").classList.remove("hidden");
        }
      }

      function fnBrowserDetect() {
        var parser = new UAParser();
        var browserName = Object.values(
          parser.getResult().browser
        )[0].toLowerCase();
        var os = Object.values(parser.getResult().os)[0].toLowerCase();
        var ver = Object.values(parser.getResult().os)[1].toLowerCase();

        //document.querySelector("h1").innerText = browserName;

        /*if ((browserName.match(/edge/i))||(browserName.match(/chrome/i))||(browserName.match(/webview/i))) {        
        $("#MAIN").addClass("hidden")
        //document.querySelector("h1").innerText = "Sorry, your browser is not supported!\n For the best experience, please use any of these supported browsers:\n Firefox, Safari, QQ or WeChat.";
        alert('Sorry, your browser is not supported!\n For the best experience, please use any of these supported browsers:\n Firefox, Safari, QQ or WeChat.')
        location.replace("https://"+window.location.hostname)
      }*/

        if (browserName.match(/webview/i)) {
          $("#MAIN").addClass("hidden");
          //document.querySelector("h1").innerText = "Sorry, your browser is not supported!\n For the best experience, please use any of these supported browsers:\n Firefox, Safari, QQ or WeChat.";
          alert(
            "Sorry, your browser is not supported!\n For the best experience, please use any of these supported browsers:\n Chrome, Firefox, Safari, QQ or WeChat."
          );
          location.replace("https://" + window.location.hostname);
        }

        // if (os.match(/android/i) && parseInt(ver) < 10) {
        //   $("#MAIN").addClass("hidden");
        //   //document.querySelector("h1").innerText = "Sorry, your Android version is not supported!\n Currently the system supports Android versions 10.0 and above.";
        //   alert(
        //     "Sorry, your Android version is not supported!\n Currently the system supports Android versions 10.0 and above."
        //   );
        //   location.replace("https://" + window.location.hostname);
        // }

        if (os.match(/mac os/i) && parseInt(ver) < 10) {
          $("#MAIN").addClass("hidden");
          //document.querySelector("h1").innerText = "Sorry, your Mac OS version is not supported!\n Currently the system supports Mac OS versions 10 and above.";
          alert(
            "Sorry, your Mac OS version is not supported!\n Currently the system supports Mac OS versions 10 and above."
          );
          location.replace("https://" + window.location.hostname);
        }

        if (os.match(/ios/i) && parseInt(ver) < 14) {
          $("#MAIN").addClass("hidden");
          //document.querySelector("h1").innerText = "Sorry, your iOS version is not supported!\n Currently the system supports iOS versions 14 and above.";
          alert(
            "Sorry, your iOS version is not supported!\n Currently the system supports iOS versions 14 and above."
          );
          location.replace("https://" + window.location.hostname);
        }

        //Get/Set associate code
        let a_code = getCookie("assoc_code");
        const url = window.location.href;
        console.log(url);
        console.log(a_code);

        const urlParams = new URLSearchParams(window.location.search);

        if (urlParams.has("rf")) {
          const rf = urlParams.get("rf");
          console.log(rf);
          setCookie("assoc_code", rf, 365);
          document.getElementById("referral").value = rf;
          document.getElementById("referral").readOnly = true;
          console.log("1");
        } else if (a_code != "") {
          setCookie("assoc_code", a_code, 365);
          document.getElementById("referral").value = a_code;
          document.getElementById("referral").readOnly = true;
          console.log("2");
        } else {
          console.log("3");
        }
      }

      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
        let expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }

      function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(";");
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == " ") {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }
    </script>

    <script src="./ml/mobile_script.js"></script>
    <script src="./ml/script_ml.js"></script>
    <script src="./ml/wave-resampler.js"></script>
    <script src="./ml/jquery.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
    <script src="https://unpkg.com/libphonenumber-js/bundle/libphonenumber-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/0.7.20/ua-parser.min.js"></script>
  </body>
</html>
